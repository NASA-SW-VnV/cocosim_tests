{
    "bio_matfunc_srp_torque_var_PP": {
        "AllCompiledSampleTimes": [
            [
                0.1,
                0
            ]
        ],
        "BlockType": "block_diagram",
        "CompiledSampleTime": [
            0.1,
            0
        ],
        "Content": {
            "In1": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 72.7896728515625,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 210.2568359375,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In1",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In1",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In1",
                "Port": "1",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 5,
                    "Position": [
                        190,
                        385
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    155,
                    378,
                    185,
                    392
                ],
                "UseBusObject": "off"
            },
            "In2": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 99.8193359375,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 211.3970947265625,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In2",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In2",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In2",
                "Port": "2",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 4,
                    "Position": [
                        235,
                        345
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    200,
                    338,
                    230,
                    352
                ],
                "UseBusObject": "off"
            },
            "In3": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 104.94482421875,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 212.4049072265625,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In3",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In3",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In3",
                "Port": "3",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 3,
                    "Position": [
                        200,
                        305
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    165,
                    298,
                    195,
                    312
                ],
                "UseBusObject": "off"
            },
            "In4": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 105.3104248046875,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 213.410888671875,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In4",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In4",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In4",
                "Port": "4",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 2,
                    "Position": [
                        245,
                        265
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    210,
                    258,
                    240,
                    272
                ],
                "UseBusObject": "off"
            },
            "In5": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        3
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 3,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 106.3341064453125,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 214.2486572265625,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In5",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In5",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In5",
                "Port": "5",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 1,
                    "Position": [
                        200,
                        225
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    165,
                    218,
                    195,
                    232
                ],
                "UseBusObject": "off"
            },
            "In6": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        2,
                        3,
                        3
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 9,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 113.495361328125,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 218.4073486328125,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In6",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/In6",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_srp_torque_var_PP/In6",
                "Port": "6",
                "PortConnectivity": {
                    "DstBlock": 118.777099609375,
                    "DstPort": 0,
                    "Position": [
                        150,
                        185
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    115,
                    178,
                    145,
                    192
                ],
                "UseBusObject": "off"
            },
            "MATLABFunction": {
                "AttributesFormatString": "",
                "BlockType": "SubSystem",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    ],
                    "LConn": [],
                    "Outport": [
                        0,
                        0,
                        0
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double",
                        "double",
                        "double",
                        "double",
                        "double",
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [
                        "double",
                        "double",
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        2,
                        3,
                        3,
                        1,
                        3,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1
                    ],
                    "LConn": [],
                    "Outport": [
                        1,
                        3,
                        1,
                        3,
                        1,
                        10
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        9,
                        3,
                        1,
                        1,
                        1,
                        1
                    ],
                    "LConn": [],
                    "Outport": [
                        3,
                        3,
                        10
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "DataTypeOverride": "UseLocalSettings",
                "Handle": 118.777099609375,
                "Inputs": [
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "[3, 3]",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 593,
                        "Name": "R_LVLH_2_body",
                        "Port": 1,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "3",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 595,
                        "Name": "s_hat_o",
                        "Port": 2,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 596,
                        "Name": "theta_panel",
                        "Port": 3,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 597,
                        "Name": "l_x",
                        "Port": 4,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 598,
                        "Name": "l_y",
                        "Port": 5,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 599,
                        "Name": "l_z",
                        "Port": 6,
                        "Scope": "Input"
                    }
                ],
                "IsSubsystemVirtual": "off",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        218.4073486328125,
                        214.2486572265625,
                        213.410888671875,
                        212.4049072265625,
                        211.3970947265625,
                        210.2568359375
                    ],
                    "LConn": [],
                    "Outport": [
                        215.2435302734375,
                        216.3994140625,
                        217.251953125
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Mask": "off",
                "MaskType": "",
                "MinAlgLoopOccurrences": "off",
                "MinMaxOverflowLogging": "UseLocalSettings",
                "Name": "MATLABFunction",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/MATLABFunction",
                "Outputs": [
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "3",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 594,
                        "Name": "solar_torque",
                        "Port": 1,
                        "Scope": "Output"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "3",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 600,
                        "Name": "s_hat_b",
                        "Port": 2,
                        "Scope": "Output"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "10",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 601,
                        "Name": "Ap_sum",
                        "Port": 3,
                        "Scope": "Output"
                    }
                ],
                "Path": "bio_matfunc_srp_torque_var_PP/MATLABFunction",
                "Permissions": "ReadWrite",
                "PermitHierarchicalResolution": "ExplicitOnly",
                "PortConnectivity": [
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            185
                        ],
                        "SrcBlock": 113.495361328125,
                        "SrcPort": 0,
                        "Type": "1"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            225
                        ],
                        "SrcBlock": 106.3341064453125,
                        "SrcPort": 0,
                        "Type": "2"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            265
                        ],
                        "SrcBlock": 105.3104248046875,
                        "SrcPort": 0,
                        "Type": "3"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            305
                        ],
                        "SrcBlock": 104.94482421875,
                        "SrcPort": 0,
                        "Type": "4"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            345
                        ],
                        "SrcBlock": 99.8193359375,
                        "SrcPort": 0,
                        "Type": "5"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            265,
                            385
                        ],
                        "SrcBlock": 72.7896728515625,
                        "SrcPort": 0,
                        "Type": "6"
                    },
                    {
                        "DstBlock": 206.71533203125,
                        "DstPort": 0,
                        "Position": [
                            415,
                            205
                        ],
                        "SrcBlock": [],
                        "SrcPort": [],
                        "Type": "1"
                    },
                    {
                        "DstBlock": 207.7313232421875,
                        "DstPort": 0,
                        "Position": [
                            415,
                            285
                        ],
                        "SrcBlock": [],
                        "SrcPort": [],
                        "Type": "2"
                    },
                    {
                        "DstBlock": 209.7869873046875,
                        "DstPort": 0,
                        "Position": [
                            415,
                            365
                        ],
                        "SrcBlock": [],
                        "SrcPort": [],
                        "Type": "3"
                    }
                ],
                "Ports": [
                    6,
                    3,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    270,
                    163,
                    410,
                    407
                ],
                "PropExecContextOutsideSubsystem": "off",
                "SFBlockType": "MATLAB Function",
                "Script": "% function [solar_torque,s_hat_b] = srp_torque_var(R_LVLH_2_body,s_hat_o,theta_panel,l_x,l_y,l_z)\n% %#codegen\n% \n% Rob = R_LVLH_2_body;\n% % this function calculates solar torque for a variable panel configuration\n% % where the solar panels can rotate about the spacecraft y-axis\n% % theta_panel is the angle in degrees that the panels are rotated from the\n% % z axis -- i.e. theta_panel = 0 when panels are aligned normal to z axis\n% \n% % Define constants\n% SC = 1367;       % W/m^2, solar constant\n% c = 3e8;         % m/s, speed of light\n% q = 1;           % Reflectance\n% \n% % Calculate an intermediate constant\n% Fc = (SC/c)*(1+q);\n% \n% % Define the surface areas associated with each face of the spacecraft.\n% % Note that As_4 is the surface area for the 1U x 2U face of the spacecraft\n% % with two 3U x 3U deployable arrays\n% \n% %depending on position of panels, their contribution to surface area\n% %changes\n% %two boundaries: 1. nominal configuration where panels contribute full Ap\n% %to z face\n% %2. panels contribute full Ap to x face\n% %between these two boundaries, panels contribute to both x and z surface\n% %areas  with cosine relationship\n% %area of two panels\n% Apanel = 2*0.3*0.3;\n% %Apanel = 0;\n% \n% As_xp = l_y*l_z;\n% As_xm = l_y*l_z;\n% As_yp = l_x*l_z;\n% As_ym = l_x*l_z;\n% As_zp = l_x*l_y;\n% As_zm = l_x*l_y;\n% \n% As = [As_xp As_xm As_yp As_ym As_zp As_zm Apanel Apanel];\n% \n% % Define the unit vector to the sun defined in the orbit frame\n% s_hat_b = Rob*s_hat_o;\n% \n% % Define a vector from the origin of the body frame to the center of\n% % gravity of the spacecraft Cg\n% \n% r_cg = 0.1*[-l_x; -l_y; -l_z];\n% %r_cg = [0; 0; -l_z/3;];\n% %r_cg = [0;0;0];\n% \n% % Define vectors in the body frame describing the offset between Cp and Cg \n% % for each face of the spacecraft\n% \n% r_cpxp = [l_x/2 0 0]';\n% r_cpxm = [-l_x/2 0 0]';\n% r_cpyp = [0 l_y/2 0]';\n% r_cpym = [0 -l_y/2 0]';\n% r_cpzp = [0 0 l_z/2]';\n% r_cpzm = [0 0 -l_z/2]';\n% \n% r_cp_panel = [0 0 l_z/2]';\n% \n% r_cp = [r_cpxp r_cpxm r_cpyp r_cpym r_cpzp r_cpzm r_cp_panel r_cp_panel];\n% \n% b_xp = [1 0 0]';\n% b_xm = [-1 0 0]';\n% b_yp = [0 1 0]';\n% b_ym = [0 -1 0]';\n% b_zp = [0 0 1]';\n% b_zm = [0 0 -1]';\n% \n% b_panel_p = [-sind(theta_panel) 0 cosd(theta_panel)]';\n% b_panel_m = -1*b_panel_p;\n% \n% b = [b_xp b_xm b_yp b_ym b_zp b_zm b_panel_p b_panel_m];\n% \n% Ms_sum = [0 0 0]';\n% for i = 1:8\n%     dot_inc_ang = dot(s_hat_b,b(:,i))/norm(s_hat_b);\n%     inc_ang = acos(dot_inc_ang);\n% %     if isreal(dot_inc_ang) == 0\n% %         inc_ang = 90*pi/180;\n% %     else\n% %         inc_ang = acos(dot_inc_ang);\n% %     end\n%     if inc_ang > 90*pi/180\n%         inc_ang = 90*pi/180;\n%     end\n%     Ap = As(i)*cos(inc_ang);\n%     Fs = Fc*Ap;\n%     r_offset = r_cg - r_cp(:,i);\n%     %r_offset = r_cp(:,i) - r_cg;\n%     Ms = cross(r_offset,Fs*s_hat_b);\n%     \n%     Ms_sum = Ms_sum + Ms;\n% end\n% solar_torque = Ms_sum;\n\n\n\n\n\n\n\n\n\n\nfunction [solar_torque,s_hat_b,Ap_sum] = srp_torque_var(R_LVLH_2_body,s_hat_o,theta_panel,l_x,l_y,l_z)\n%#codegen\n\nRob = R_LVLH_2_body;\n% this function calculates solar torque for a variable panel configuration\n% where the solar panels can rotate about the spacecraft y-axis\n% theta_panel is the angle in degrees that the panels are rotated from the\n% z axis -- i.e. theta_panel = 0 when panels are aligned normal to z axis\n\n% Define constants\nSC = 1367;       % W/m^2, solar constant\nc = 3e8;         % m/s, speed of light\nq = 1;           % Reflectance\n\n% Calculate an intermediate constant\nFc = (SC/c)*(1+q);\n\n% Define the surface areas associated with each face of the spacecraft.\n% Note that As_4 is the surface area for the 1U x 2U face of the spacecraft\n% with two 3U x 3U deployable arrays\n\n%depending on position of panels, their contribution to surface area\n%changes\n%two boundaries: 1. nominal configuration where panels contribute full Ap\n%to z face\n%2. panels contribute full Ap to x face\n%between these two boundaries, panels contribute to both x and z surface\n%areas  with cosine relationship\n%area of two panels\nApanel = 0.3*0.3;\n%Apanel = 0;\n\nAs_xp = l_y*l_z;\nAs_xm = l_y*l_z;\nAs_yp = l_x*l_z;\nAs_ym = l_x*l_z;\nAs_zp = l_x*l_y;\nAs_zm = l_x*l_y;\n\nAs = [As_xp As_xm As_yp As_ym As_zp As_zm Apanel Apanel Apanel Apanel];\n\n% Define the unit vector to the sun defined in the orbit frame\ns_hat_b = Rob*s_hat_o;\n\n% Define a vector from the origin of the body frame to the center of\n% gravity of the spacecraft Cg\n\nr_cg = 0.1*[-l_x; -l_y; -l_z];\n%r_cg = [0; 0; -l_z/3;];\n%r_cg = [0;0;0];\n\n% Define vectors in the body frame describing the offset between Cp and Cg \n% for each face of the spacecraft\n\nr_cpxp = [l_x/2 0 0]';\nr_cpxm = [-l_x/2 0 0]';\nr_cpyp = [0 l_y/2 0]';\nr_cpym = [0 -l_y/2 0]';\nr_cpzp = [0 0 l_z/2]';\nr_cpzm = [0 0 -l_z/2]';\n\nr_cp_panel1_p = [0.25 0 l_z/2]';\nr_cp_panel1_m = [0.25 0 l_z/2]';\nr_cp_panel2_p = [-0.25 0 l_z/2]';\nr_cp_panel2_m = [-0.25 0 l_z/2]';\n\nr_cp = [r_cpxp r_cpxm r_cpyp r_cpym r_cpzp r_cpzm r_cp_panel1_p r_cp_panel1_m r_cp_panel2_p r_cp_panel2_m];\n\nb_xp = [1 0 0]';\nb_xm = [-1 0 0]';\nb_yp = [0 1 0]';\nb_ym = [0 -1 0]';\nb_zp = [0 0 1]';\nb_zm = [0 0 -1]';\n\nb_panel_p = [-sind(theta_panel) 0 cosd(theta_panel)]';\nb_panel_m = -1*b_panel_p;\n\nb = [b_xp b_xm b_yp b_ym b_zp b_zm b_panel_p b_panel_m b_panel_p b_panel_m];\n\nMs_sum = [0 0 0]';\nAp_sum = zeros(10,1);\nfor i = 1:10\n    dot_inc_ang = dot(s_hat_b,b(:,i))/norm(s_hat_b);\n    inc_ang = acos(dot_inc_ang);\n%     if isreal(dot_inc_ang) == 0\n%         inc_ang = 90*pi/180;\n%     else\n%         inc_ang = acos(dot_inc_ang);\n%     end\n    if inc_ang > 90*pi/180\n        inc_ang = 90*pi/180;\n    end\n        \n    Ap = As(i)*cos(inc_ang);\n    \n    Ap_sum(i) = Ap;\n    \n    Fs = Fc*Ap;\n    r_offset = r_cg - r_cp(:,i);\n    %r_offset = r_cp(:,i) - r_cg;\n    Ms = cross(r_offset,Fs*s_hat_b);\n    \n    Ms_sum = Ms_sum + Ms;\nend\nsolar_torque = Ms_sum;",
                "ShowPortLabels": "FromPortIcon",
                "TemplateBlock": "",
                "TreatAsAtomicUnit": "on",
                "Virtual": "off"
            },
            "Out1": {
                "AttributesFormatString": "",
                "BlockType": "Outport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 0,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        3
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 3,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 206.71533203125,
                "InitialOutput": "[]",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 215.2435302734375,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "Out1",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/Out1",
                "OutMax": "[]",
                "OutMin": "[]",
                "OutputWhenDisabled": "held",
                "Path": "bio_matfunc_srp_torque_var_PP/Out1",
                "Port": "1",
                "PortConnectivity": {
                    "DstBlock": [],
                    "DstPort": [],
                    "Position": [
                        515,
                        205
                    ],
                    "SrcBlock": 118.777099609375,
                    "SrcPort": 0,
                    "Type": "1"
                },
                "Ports": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    520,
                    198,
                    550,
                    212
                ],
                "UseBusObject": "off"
            },
            "Out2": {
                "AttributesFormatString": "",
                "BlockType": "Outport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 0,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        3
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 3,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 207.7313232421875,
                "InitialOutput": "[]",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 216.3994140625,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "Out2",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/Out2",
                "OutMax": "[]",
                "OutMin": "[]",
                "OutputWhenDisabled": "held",
                "Path": "bio_matfunc_srp_torque_var_PP/Out2",
                "Port": "2",
                "PortConnectivity": {
                    "DstBlock": [],
                    "DstPort": [],
                    "Position": [
                        515,
                        285
                    ],
                    "SrcBlock": 118.777099609375,
                    "SrcPort": 1,
                    "Type": "1"
                },
                "Ports": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    520,
                    278,
                    550,
                    292
                ],
                "UseBusObject": "off"
            },
            "Out3": {
                "AttributesFormatString": "",
                "BlockType": "Outport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 0,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        10
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 10,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 209.7869873046875,
                "InitialOutput": "[]",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 217.251953125,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "Out3",
                "Origin_path": "bio_matfunc_srp_torque_var_PP/Out3",
                "OutMax": "[]",
                "OutMin": "[]",
                "OutputWhenDisabled": "held",
                "Path": "bio_matfunc_srp_torque_var_PP/Out3",
                "Port": "3",
                "PortConnectivity": {
                    "DstBlock": [],
                    "DstPort": [],
                    "Position": [
                        515,
                        365
                    ],
                    "SrcBlock": 118.777099609375,
                    "SrcPort": 2,
                    "Type": "1"
                },
                "Ports": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    520,
                    358,
                    550,
                    372
                ],
                "UseBusObject": "off"
            }
        },
        "Handle": 9.8365478515625,
        "Name": "bio_matfunc_srp_torque_var_PP",
        "Origin_path": "bio_matfunc_srp_torque_var_PP",
        "Path": "bio_matfunc_srp_torque_var_PP"
    },
    "meta": {
        "Declarations": {
            "Enumerations": []
        },
        "date": "01-Nov-2020",
        "file_path": "/Users/ktrinh/cocosim/cocosim_github/cocosim_tests/Simulink/unitTests/MATLABFunction/bio_matfunc_srp_torque_var_PP.slx",
        "sampleTime": 0.1
    }
}
