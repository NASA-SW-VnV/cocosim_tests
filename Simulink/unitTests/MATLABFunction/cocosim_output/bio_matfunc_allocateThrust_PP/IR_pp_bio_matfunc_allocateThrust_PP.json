{
    "bio_matfunc_allocateThrust_PP": {
        "AllCompiledSampleTimes": [
            [
                0.1,
                0
            ]
        ],
        "BlockType": "block_diagram",
        "CompiledSampleTime": [
            0.1,
            0
        ],
        "Content": {
            "Display": {
                "AttributesFormatString": "",
                "BlockType": "Display",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 0,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        6
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 6,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Decimation": "1",
                "Floating": "off",
                "Format": "short",
                "Handle": 6.2625732421875,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 30.1904296875,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "Display",
                "Origin_path": "bio_matfunc_allocateThrust_PP/Display",
                "Path": "bio_matfunc_allocateThrust_PP/Display",
                "PortConnectivity": {
                    "DstBlock": [],
                    "DstPort": [],
                    "Position": [
                        700,
                        135
                    ],
                    "SrcBlock": 7.23876953125,
                    "SrcPort": 0,
                    "Type": "1"
                },
                "Ports": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    705,
                    70,
                    895,
                    200
                ]
            },
            "In1": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        3
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 3,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 2.2669677734375,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 25.193359375,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In1",
                "Origin_path": "bio_matfunc_allocateThrust_PP/In1",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_allocateThrust_PP/In1",
                "Port": "1",
                "PortConnectivity": {
                    "DstBlock": 7.23876953125,
                    "DstPort": 0,
                    "Position": [
                        290,
                        155
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    255,
                    148,
                    285,
                    162
                ],
                "UseBusObject": "off"
            },
            "In2": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 3.27294921875,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 26.193359375,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In2",
                "Origin_path": "bio_matfunc_allocateThrust_PP/In2",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_allocateThrust_PP/In2",
                "Port": "2",
                "PortConnectivity": {
                    "DstBlock": 7.23876953125,
                    "DstPort": 1,
                    "Position": [
                        350,
                        205
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    315,
                    198,
                    345,
                    212
                ],
                "UseBusObject": "off"
            },
            "In3": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        1,
                        1
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 1,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 4.2691650390625,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 27.1925048828125,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In3",
                "Origin_path": "bio_matfunc_allocateThrust_PP/In3",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_allocateThrust_PP/In3",
                "Port": "3",
                "PortConnectivity": {
                    "DstBlock": 7.23876953125,
                    "DstPort": 3,
                    "Position": [
                        350,
                        305
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    315,
                    298,
                    345,
                    312
                ],
                "UseBusObject": "off"
            },
            "In4": {
                "AttributesFormatString": "",
                "BlockType": "Inport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": [
                        2,
                        6,
                        6
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 36,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 5.260986328125,
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [],
                    "LConn": [],
                    "Outport": 28.1915283203125,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "In4",
                "Origin_path": "bio_matfunc_allocateThrust_PP/In4",
                "OutMax": "[]",
                "OutMin": "[]",
                "Path": "bio_matfunc_allocateThrust_PP/In4",
                "Port": "4",
                "PortConnectivity": {
                    "DstBlock": 7.23876953125,
                    "DstPort": 2,
                    "Position": [
                        290,
                        255
                    ],
                    "SrcBlock": [],
                    "SrcPort": [],
                    "Type": "1"
                },
                "Ports": [
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    255,
                    248,
                    285,
                    262
                ],
                "UseBusObject": "off"
            },
            "MATLABFunction": {
                "AttributesFormatString": "",
                "BlockType": "SubSystem",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        0,
                        0,
                        0,
                        0
                    ],
                    "LConn": [],
                    "Outport": 0,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double",
                        "double",
                        "double",
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [
                        "double"
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        3,
                        1,
                        1,
                        2,
                        6,
                        6,
                        1,
                        1
                    ],
                    "LConn": [],
                    "Outport": [
                        1,
                        6
                    ],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        3,
                        1,
                        36,
                        1
                    ],
                    "LConn": [],
                    "Outport": 6,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "DataTypeOverride": "UseLocalSettings",
                "Handle": 7.23876953125,
                "Inputs": [
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "3",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 556,
                        "Name": "T",
                        "Port": 1,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 557,
                        "Name": "N_thrusters",
                        "Port": 2,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "[6, 6]",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 559,
                        "Name": "H_thrusters",
                        "Port": 3,
                        "Scope": "Input"
                    },
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "1",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 560,
                        "Name": "fmax",
                        "Port": 4,
                        "Scope": "Input"
                    }
                ],
                "IsSubsystemVirtual": "off",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        25.193359375,
                        26.193359375,
                        28.1915283203125,
                        27.1925048828125
                    ],
                    "LConn": [],
                    "Outport": 29.1920166015625,
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Mask": "off",
                "MaskType": "",
                "MinAlgLoopOccurrences": "off",
                "MinMaxOverflowLogging": "UseLocalSettings",
                "Name": "MATLABFunction",
                "Origin_path": "bio_matfunc_allocateThrust_PP/MATLABFunction",
                "Outputs": [
                    {
                        "ArraySize": "-1",
                        "CompiledSize": "6",
                        "CompiledType": "double",
                        "Datatype": "Inherit: Same as Simulink",
                        "Id": 558,
                        "Name": "thruster_forces",
                        "Port": 1,
                        "Scope": "Output"
                    }
                ],
                "Path": "bio_matfunc_allocateThrust_PP/MATLABFunction",
                "Permissions": "ReadWrite",
                "PermitHierarchicalResolution": "ExplicitOnly",
                "PortConnectivity": [
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            385,
                            155
                        ],
                        "SrcBlock": 2.2669677734375,
                        "SrcPort": 0,
                        "Type": "1"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            385,
                            205
                        ],
                        "SrcBlock": 3.27294921875,
                        "SrcPort": 0,
                        "Type": "2"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            385,
                            255
                        ],
                        "SrcBlock": 5.260986328125,
                        "SrcPort": 0,
                        "Type": "3"
                    },
                    {
                        "DstBlock": [],
                        "DstPort": [],
                        "Position": [
                            385,
                            305
                        ],
                        "SrcBlock": 4.2691650390625,
                        "SrcPort": 0,
                        "Type": "4"
                    },
                    {
                        "DstBlock": [
                            24.1961669921875,
                            6.2625732421875
                        ],
                        "DstPort": [
                            0,
                            0
                        ],
                        "Position": [
                            550,
                            230
                        ],
                        "SrcBlock": [],
                        "SrcPort": [],
                        "Type": "1"
                    }
                ],
                "Ports": [
                    4,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    390,
                    125,
                    545,
                    335
                ],
                "PropExecContextOutsideSubsystem": "off",
                "SFBlockType": "MATLAB Function",
                "Script": "function thruster_forces = allocateThrust(T,N_thrusters,H_thrusters,fmax)\n%#codegen\n\nthruster_forces = zeros(6,1);\nH = H_thrusters(4:6,:);\nusat = zeros(6,1);\nu = zeros(6,1);\nflag = 0;\nwhile flag == 0\n    flag = 1;\n    %u = pinv(H)*T;\n    u = H'*inv(H*H')*T;\n    for j = 1:N_thrusters\n        if u(j) < -0.000000001\n            u(j) = 0;\n            %usat(j) = 0;\n            %T = T - H*usat;\n            H(:,j) = zeros(3,1);\n            flag = 0;\n        end\n    end\nend\n%u = u + usat;\nthruster_forces = u;",
                "ShowPortLabels": "FromPortIcon",
                "TemplateBlock": "",
                "TreatAsAtomicUnit": "on",
                "Virtual": "off"
            },
            "Out1": {
                "AttributesFormatString": "",
                "BlockType": "Outport",
                "BusObject": "BusObject",
                "CompiledPortComplexSignals": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 0,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDataTypes": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        "double"
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortDimensions": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": [
                        1,
                        6
                    ],
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledPortWidths": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 6,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "CompiledSampleTime": [
                    0.1,
                    0
                ],
                "Handle": 24.1961669921875,
                "InitialOutput": "[]",
                "LineHandles": {
                    "Enable": [],
                    "Ifaction": [],
                    "Inport": 31.18994140625,
                    "LConn": [],
                    "Outport": [],
                    "RConn": [],
                    "Reset": [],
                    "State": [],
                    "Trigger": []
                },
                "Name": "Out1",
                "Origin_path": "bio_matfunc_allocateThrust_PP/Out1",
                "OutMax": "[]",
                "OutMin": "[]",
                "OutputWhenDisabled": "held",
                "Path": "bio_matfunc_allocateThrust_PP/Out1",
                "Port": "1",
                "PortConnectivity": {
                    "DstBlock": [],
                    "DstPort": [],
                    "Position": [
                        645,
                        230
                    ],
                    "SrcBlock": 7.23876953125,
                    "SrcPort": 0,
                    "Type": "1"
                },
                "Ports": [
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                ],
                "Position": [
                    650,
                    223,
                    680,
                    237
                ],
                "UseBusObject": "off"
            }
        },
        "Handle": 0.2669677734375,
        "Name": "bio_matfunc_allocateThrust_PP",
        "Origin_path": "bio_matfunc_allocateThrust_PP",
        "Path": "bio_matfunc_allocateThrust_PP"
    },
    "meta": {
        "Declarations": {
            "Enumerations": []
        },
        "date": "23-Oct-2020",
        "file_path": "/Users/hbourbou/Documents/babelfish.arc.nasa.gov/cocosim_github/cocosim_tests/Simulink/unitTests/MATLABFunction/bio_matfunc_allocateThrust_PP.slx",
        "sampleTime": 0.1
    }
}
