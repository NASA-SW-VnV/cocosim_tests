{"meta":{"file_path":"/Users/ktrinh/cocosim/cocosim_github/cocosim_tests/Simulink/unitTests/MATLABFunction/ava/ava1_PP.slx","sampleTime":0.1,"date":"01-Nov-2020","Declarations":{"Enumerations":[]}},"ava1_PP":{"Content":{"xk":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,18],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":18,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":99.8760986328125,"LineHandles":{"Inport":[],"Outport":299.2757568359375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"xk","Origin_path":"ava1_PP/xk","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/xk","Port":"1","PortConnectivity":{"Type":"1","Position":[480,510],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":0},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,503,475,517],"UseBusObject":"off"},"qk":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,4],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":4,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":104.954345703125,"LineHandles":{"Inport":[],"Outport":300.2689208984375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"qk","Origin_path":"ava1_PP/qk","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/qk","Port":"2","PortConnectivity":{"Type":"1","Position":[480,545],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":1},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,538,475,552],"UseBusObject":"off"},"Pk":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[2,18,18],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":324,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":105.3199462890625,"LineHandles":{"Inport":[],"Outport":301.2696533203125,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"Pk","Origin_path":"ava1_PP/Pk","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/Pk","Port":"3","PortConnectivity":{"Type":"1","Position":[480,580],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":2},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,573,475,587],"UseBusObject":"off"},"w_meas_k":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":106.3648681640625,"LineHandles":{"Inport":[],"Outport":302.4256591796875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"w_meas_k","Origin_path":"ava1_PP/w_meas_k","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/w_meas_k","Port":"4","PortConnectivity":{"Type":"1","Position":[480,615],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":3},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,608,475,622],"UseBusObject":"off"},"w_meas_k1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":113.507080078125,"LineHandles":{"Inport":[],"Outport":303.270751953125,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"w_meas_k1","Origin_path":"ava1_PP/w_meas_k1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/w_meas_k1","Port":"5","PortConnectivity":{"Type":"1","Position":[480,650],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":4},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,643,475,657],"UseBusObject":"off"},"wk1_dot":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":118.78662109375,"LineHandles":{"Inport":[],"Outport":304.263916015625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"wk1_dot","Origin_path":"ava1_PP/wk1_dot","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/wk1_dot","Port":"6","PortConnectivity":{"Type":"1","Position":[480,685],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":5},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,678,475,692],"UseBusObject":"off"},"a_meas_k":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":122.8936767578125,"LineHandles":{"Inport":[],"Outport":305.261962890625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"a_meas_k","Origin_path":"ava1_PP/a_meas_k","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/a_meas_k","Port":"7","PortConnectivity":{"Type":"1","Position":[480,720],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":6},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,713,475,727],"UseBusObject":"off"},"a_meas_k1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":148.6412353515625,"LineHandles":{"Inport":[],"Outport":306.70166015625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"a_meas_k1","Origin_path":"ava1_PP/a_meas_k1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/a_meas_k1","Port":"8","PortConnectivity":{"Type":"1","Position":[480,755],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":7},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,748,475,762],"UseBusObject":"off"},"acc_saturated":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":152.9486083984375,"LineHandles":{"Inport":[],"Outport":307.2620849609375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"acc_saturated","Origin_path":"ava1_PP/acc_saturated","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/acc_saturated","Port":"9","PortConnectivity":{"Type":"1","Position":[480,790],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":8},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,783,475,797],"UseBusObject":"off"},"r_meas":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":176.857177734375,"LineHandles":{"Inport":[],"Outport":308.2567138671875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"r_meas","Origin_path":"ava1_PP/r_meas","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/r_meas","Port":"10","PortConnectivity":{"Type":"1","Position":[480,825],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":9},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,818,475,832],"UseBusObject":"off"},"v_meas1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":178.819091796875,"LineHandles":{"Inport":[],"Outport":309.252685546875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"v_meas1","Origin_path":"ava1_PP/v_meas1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/v_meas1","Port":"11","PortConnectivity":{"Type":"1","Position":[480,860],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":10},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,853,475,867],"UseBusObject":"off"},"B_meas1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":179.4278564453125,"LineHandles":{"Inport":[],"Outport":310.2528076171875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"B_meas1","Origin_path":"ava1_PP/B_meas1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/B_meas1","Port":"12","PortConnectivity":{"Type":"1","Position":[480,895],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":11},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,888,475,902],"UseBusObject":"off"},"GPS_upd":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":180.75146484375,"LineHandles":{"Inport":[],"Outport":311.2518310546875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"GPS_upd","Origin_path":"ava1_PP/GPS_upd","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/GPS_upd","Port":"13","PortConnectivity":{"Type":"1","Position":[480,930],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":12},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,923,475,937],"UseBusObject":"off"},"gps_latency":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":182.7933349609375,"LineHandles":{"Inport":[],"Outport":312.2628173828125,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"gps_latency","Origin_path":"ava1_PP/gps_latency","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/gps_latency","Port":"14","PortConnectivity":{"Type":"1","Position":[480,965],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":13},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,958,475,972],"UseBusObject":"off"},"GPS_time_sec_k1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":190.8096923828125,"LineHandles":{"Inport":[],"Outport":313.249755859375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"GPS_time_sec_k1","Origin_path":"ava1_PP/GPS_time_sec_k1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/GPS_time_sec_k1","Port":"15","PortConnectivity":{"Type":"1","Position":[480,1000],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":14},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,993,475,1007],"UseBusObject":"off"},"GPS_time_sec_k":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":191.428466796875,"LineHandles":{"Inport":[],"Outport":314.2523193359375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"GPS_time_sec_k","Origin_path":"ava1_PP/GPS_time_sec_k","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/GPS_time_sec_k","Port":"16","PortConnectivity":{"Type":"1","Position":[480,1035],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":15},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1028,475,1042],"UseBusObject":"off"},"hrg_w_meas_k":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":193.3138427734375,"LineHandles":{"Inport":[],"Outport":315.2530517578125,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"hrg_w_meas_k","Origin_path":"ava1_PP/hrg_w_meas_k","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/hrg_w_meas_k","Port":"17","PortConnectivity":{"Type":"1","Position":[480,1070],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":16},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1063,475,1077],"UseBusObject":"off"},"hrg_w_meas_k1":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":194.728759765625,"LineHandles":{"Inport":[],"Outport":316.2532958984375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"hrg_w_meas_k1","Origin_path":"ava1_PP/hrg_w_meas_k1","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/hrg_w_meas_k1","Port":"18","PortConnectivity":{"Type":"1","Position":[480,1105],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":17},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1098,475,1112],"UseBusObject":"off"},"hrg_w_dot":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":195.2685546875,"LineHandles":{"Inport":[],"Outport":317.2486572265625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"hrg_w_dot","Origin_path":"ava1_PP/hrg_w_dot","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/hrg_w_dot","Port":"19","PortConnectivity":{"Type":"1","Position":[480,1140],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":18},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1133,475,1147],"UseBusObject":"off"},"hrg_only":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":196.734619140625,"LineHandles":{"Inport":[],"Outport":318.2484130859375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"hrg_only","Origin_path":"ava1_PP/hrg_only","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/hrg_only","Port":"20","PortConnectivity":{"Type":"1","Position":[480,1175],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":19},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1168,475,1182],"UseBusObject":"off"},"a_gps_eci":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":197.5921630859375,"LineHandles":{"Inport":[],"Outport":319.2476806640625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"a_gps_eci","Origin_path":"ava1_PP/a_gps_eci","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/a_gps_eci","Port":"21","PortConnectivity":{"Type":"1","Position":[480,1210],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":20},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1203,475,1217],"UseBusObject":"off"},"Bi":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":198.8963623046875,"LineHandles":{"Inport":[],"Outport":320.24951171875,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"Bi","Origin_path":"ava1_PP/Bi","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/Bi","Port":"22","PortConnectivity":{"Type":"1","Position":[480,1245],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":21},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1238,475,1252],"UseBusObject":"off"},"init_sw":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["boolean"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":199.42626953125,"LineHandles":{"Inport":[],"Outport":321.252197265625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"init_sw","Origin_path":"ava1_PP/init_sw","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/init_sw","Port":"23","PortConnectivity":{"Type":"1","Position":[480,1280],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":22},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[445,1273,475,1287],"UseBusObject":"off"},"a_grav":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":3,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":200.420166015625,"LineHandles":{"Inport":[],"Outport":323.2503662109375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"a_grav","Origin_path":"ava1_PP/a_grav","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/a_grav","Port":"24","PortConnectivity":{"Type":"1","Position":[490,1350],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":24},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[455,1343,485,1357],"UseBusObject":"off"},"dt":{"AttributesFormatString":"","BlockType":"Inport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":1,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":201.2489013671875,"LineHandles":{"Inport":[],"Outport":324.2486572265625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"dt","Origin_path":"ava1_PP/dt","OutMax":"[]","OutMin":"[]","Path":"ava1_PP/dt","Port":"25","PortConnectivity":{"Type":"1","Position":[490,1385],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":25},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[455,1378,485,1392],"UseBusObject":"off"},"Constant3":{"Path":"ava1_PP/Constant3","BlockType":"Constant","Name":"Constant3","Origin_path":"ava1_PP/Constant3","Handle":202.7320556640625,"LineHandles":{"Inport":[],"Outport":328.2525634765625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[null,0],"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,18],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":18,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":{"Type":"1","Position":[520,1525],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":29},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[425,1515,515,1535],"AttributesFormatString":"","Value":"gnc_Q_EKF","VectorParams1D":"on","OutMin":"[]","OutMax":"[]","OutDataTypeStr":"Inherit: Inherit from 'Constant value'","LockScale":"off","SampleTime":"inf","FramePeriod":"inf"},"Constant4":{"Path":"ava1_PP/Constant4","BlockType":"Constant","Name":"Constant4","Origin_path":"ava1_PP/Constant4","Handle":203.89892578125,"LineHandles":{"Inport":[],"Outport":327.251708984375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[null,0],"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[2,3,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":9,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":{"Type":"1","Position":[520,1490],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":28},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[425,1480,515,1500],"AttributesFormatString":"","Value":"gnc_R_mag","VectorParams1D":"on","OutMin":"[]","OutMax":"[]","OutDataTypeStr":"Inherit: Inherit from 'Constant value'","LockScale":"off","SampleTime":"inf","FramePeriod":"inf"},"Constant5":{"Path":"ava1_PP/Constant5","BlockType":"Constant","Name":"Constant5","Origin_path":"ava1_PP/Constant5","Handle":214.3994140625,"LineHandles":{"Inport":[],"Outport":326.24609375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[null,0],"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[2,3,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":9,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":{"Type":"1","Position":[520,1455],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":27},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[425,1445,515,1465],"AttributesFormatString":"","Value":"gnc_R_gps_vel","VectorParams1D":"on","OutMin":"[]","OutMax":"[]","OutDataTypeStr":"Inherit: Inherit from 'Constant value'","LockScale":"off","SampleTime":"inf","FramePeriod":"inf"},"Constant6":{"Path":"ava1_PP/Constant6","BlockType":"Constant","Name":"Constant6","Origin_path":"ava1_PP/Constant6","Handle":215.728271484375,"LineHandles":{"Inport":[],"Outport":325.254150390625,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[null,0],"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[2,3,3],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":9,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":{"Type":"1","Position":[520,1420],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":26},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[425,1410,515,1430],"AttributesFormatString":"","Value":"gnc_R_gps_pos","VectorParams1D":"on","OutMin":"[]","OutMax":"[]","OutDataTypeStr":"Inherit: Inherit from 'Constant value'","LockScale":"off","SampleTime":"inf","FramePeriod":"inf"},"Constant9":{"Path":"ava1_PP/Constant9","BlockType":"Constant","Name":"Constant9","Origin_path":"ava1_PP/Constant9","Handle":216.4185791015625,"LineHandles":{"Inport":[],"Outport":322.2493896484375,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[null,0],"CompiledPortDataTypes":{"Inport":[],"Outport":["double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[],"Outport":[1,4],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[],"Outport":4,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[],"Outport":0,"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":{"Type":"1","Position":[520,1315],"SrcBlock":[],"SrcPort":[],"DstBlock":217.25830078125,"DstPort":23},"Ports":[0,1,0,0,0,0,0,0,0],"Position":[425,1305,515,1325],"AttributesFormatString":"","Value":"[0.0800\n;   10.0000\n;    0.0100\n;  100.0000]","VectorParams1D":"on","OutMin":"[]","OutMax":"[]","OutDataTypeStr":"Inherit: Inherit from 'Constant value'","LockScale":"off","SampleTime":"inf","FramePeriod":"inf"},"MATLABFunction":{"Path":"ava1_PP/MATLABFunction","BlockType":"SubSystem","Name":"MATLABFunction","Origin_path":"ava1_PP/MATLABFunction","Handle":217.25830078125,"LineHandles":{"Inport":[299.2757568359375,300.2689208984375,301.2696533203125,302.4256591796875,303.270751953125,304.263916015625,305.261962890625,306.70166015625,307.2620849609375,308.2567138671875,309.252685546875,310.2528076171875,311.2518310546875,312.2628173828125,313.249755859375,314.2523193359375,315.2530517578125,316.2532958984375,317.2486572265625,318.2484130859375,319.2476806640625,320.24951171875,321.252197265625,322.2493896484375,323.2503662109375,324.2486572265625,325.254150390625,326.24609375,327.251708984375,328.2525634765625],"Outport":[295.273193359375,296.2730712890625,297.2769775390625,298.278076171875],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"CompiledPortDataTypes":{"Inport":["double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","double","boolean","double","double","double","double","double","double","double"],"Outport":["double","double","double","double"],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[1,18,1,4,2,18,18,1,3,1,3,1,3,1,3,1,3,1,1,1,3,1,3,1,3,1,1,1,1,1,1,1,1,1,3,1,3,1,3,1,1,1,3,1,3,1,1,1,4,1,3,1,1,2,3,3,2,3,3,2,3,3,1,18],"Outport":[1,18,1,4,2,18,18,1,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":[18,4,324,3,3,3,3,3,1,3,3,3,1,1,1,1,3,3,3,1,3,3,1,4,3,1,9,9,9,18],"Outport":[18,4,324,1],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortComplexSignals":{"Inport":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"Outport":[0,0,0,0],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"PortConnectivity":[{"Type":"1","Position":[560,510],"SrcBlock":99.8760986328125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"2","Position":[560,545],"SrcBlock":104.954345703125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"3","Position":[560,580],"SrcBlock":105.3199462890625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"4","Position":[560,615],"SrcBlock":106.3648681640625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"5","Position":[560,650],"SrcBlock":113.507080078125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"6","Position":[560,685],"SrcBlock":118.78662109375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"7","Position":[560,720],"SrcBlock":122.8936767578125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"8","Position":[560,755],"SrcBlock":148.6412353515625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"9","Position":[560,790],"SrcBlock":152.9486083984375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"10","Position":[560,825],"SrcBlock":176.857177734375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"11","Position":[560,860],"SrcBlock":178.819091796875,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"12","Position":[560,895],"SrcBlock":179.4278564453125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"13","Position":[560,930],"SrcBlock":180.75146484375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"14","Position":[560,965],"SrcBlock":182.7933349609375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"15","Position":[560,1000],"SrcBlock":190.8096923828125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"16","Position":[560,1035],"SrcBlock":191.428466796875,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"17","Position":[560,1070],"SrcBlock":193.3138427734375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"18","Position":[560,1105],"SrcBlock":194.728759765625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"19","Position":[560,1140],"SrcBlock":195.2685546875,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"20","Position":[560,1175],"SrcBlock":196.734619140625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"21","Position":[560,1210],"SrcBlock":197.5921630859375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"22","Position":[560,1245],"SrcBlock":198.8963623046875,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"23","Position":[560,1280],"SrcBlock":199.42626953125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"24","Position":[560,1315],"SrcBlock":216.4185791015625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"25","Position":[560,1350],"SrcBlock":200.420166015625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"26","Position":[560,1385],"SrcBlock":201.2489013671875,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"27","Position":[560,1420],"SrcBlock":215.728271484375,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"28","Position":[560,1455],"SrcBlock":214.3994140625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"29","Position":[560,1490],"SrcBlock":203.89892578125,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"30","Position":[560,1525],"SrcBlock":202.7320556640625,"SrcPort":0,"DstBlock":[],"DstPort":[]},{"Type":"1","Position":[810,605],"SrcBlock":[],"SrcPort":[],"DstBlock":291.2860107421875,"DstPort":0},{"Type":"2","Position":[810,880],"SrcBlock":[],"SrcPort":[],"DstBlock":292.269775390625,"DstPort":0},{"Type":"3","Position":[810,1155],"SrcBlock":[],"SrcPort":[],"DstBlock":293.2723388671875,"DstPort":0},{"Type":"4","Position":[810,1430],"SrcBlock":[],"SrcPort":[],"DstBlock":294.281005859375,"DstPort":0}],"Ports":[30,4,0,0,0,0,0,0,0],"Position":[565,467,805,1568],"AttributesFormatString":"","ActiveVariant":"","ActiveVariantBlock":"","AllowZeroVariantControls":"off","BlockChoice":"","DataTypeOverride":"UseLocalSettings","ErrorFcn":"Stateflow.Translate.translate","FunctionInterfaceSpec":"void_void","FunctionWithSeparateData":"off","GeneratePreprocessorConditionals":"off","IsSubsystemVirtual":"off","MemberBlocks":"","MinAlgLoopOccurrences":"off","MinMaxOverflowLogging":"UseLocalSettings","OverrideUsingVariant":"","Permissions":"ReadWrite","PermitHierarchicalResolution":"ExplicitOnly","PropExecContextOutsideSubsystem":"off","PropagateVariantConditions":"off","RTWFcnName":"","RTWFcnNameOpts":"Auto","RTWFileName":"","RTWFileNameOpts":"Auto","RTWMemSecDataConstants":"Inherit from model","RTWMemSecDataInternal":"Inherit from model","RTWMemSecDataParameters":"Inherit from model","RTWMemSecFuncExecute":"Inherit from model","RTWMemSecFuncInitTerm":"Inherit from model","RTWSystemCode":"Auto","SFBlockType":"MATLAB Function","ShowPortLabels":"FromPortIcon","SystemSampleTime":"-1","TemplateBlock":"","TreatAsAtomicUnit":"on","TreatAsGroupedWhenPropagatingVariantConditions":"on","Variant":"off","VariantControl":"","Virtual":"off","Mask":"on","MaskType":"","Script":"function [xk1,qk1,Pk1,    status]   = INS_GPS_EKF_swords(xk,qk,Pk,w_meas_k,w_meas_k1,wk1_dot,a_meas_k,a_meas_k1,acc_saturated, r_meas,...\n    v_meas, B_meas,GPS_upd,gps_latency,GPS_time_sec_k1, GPS_time_sec_k, hrg_w_meas_k, hrg_w_meas_k1, hrg_w_dot, hrg_only,a_gps_eci,Bi,init_sw,... \n    estimator_parameters, a_grav, dt, R_gps_pos,R_gps_vel,R_mag, q_vec ) \n\n%%%%\n%#codegen\n\na_bar_inertial=[0 0 0]';\nerr=0; %Error code : 1-negetive S,\na_e=[0 0 0]';\nmu = 3.9860e+14; %398600*1000*1000*1000;\nvalid_GPS_meas=(GPS_upd == 1)&&(GPS_time_sec_k > 0)&&(GPS_time_sec_k1 > GPS_time_sec_k + dt-0.01);\nvalid_Mag_meas=norm(Bi)>0 && norm(B_meas)>0;\nvalid_Acc_meas=norm(a_meas_k)>0.5 && norm(a_meas_k1)>0.5;\nscale_flag=single([0 0 0]');dscaler=[0.0 0.0 0.0]';scaler=zeros(3,3);diagscaler=diag(scaler);\n\nstatus=0; %Status bit\n          %8:reserved(MSB)\n          %7:DIVERGING\n          %6:bias convergency\n          %5:attitude convergency\n          %4:transition convergency\n          %3:magnetometer measurement available\n          %2:GPS available\n          %1:initilized\n\n\n\nif hrg_only\n    wk =  hrg_w_meas_k;\n    wk1 = hrg_w_meas_k1;\n    wk1_dot=hrg_w_dot;\nelse\n    wk = w_meas_k;\n    wk1 = w_meas_k1;\nend\n\nak = a_meas_k;\nak1 = a_meas_k1;\na_bar= .5*a_meas_k + .5*a_meas_k1;\n\nrk = xk(4:6);\nvk = xk(7:9);    \n\nif init_sw ~= 0 || norm(a_grav)==0\n    xk1 = xk;\n    Pk1 = Pk;\n    qk1 = qk;    \n    return;\nend\n\n%Initilization done\nstatus = bitor(status, bin2dec('00000001')); \n\n%(18by1)vector q ->(18by18)matrix Q\nQ=zeros(18,18);\nfor i=1:18\n    Q(i,i)=q_vec(i);\nend\n\n%%%%%%%%%%% (1) propagate state %%%%%%%%%%%\n%acclerometer screening during free fall\nflag_freefall=0;\nif (norm(ak1)<8 && norm(ak)<8) \n    flag_freefall=1;\nend\n\n%propagate attitude\n%1st order\nwbar = (wk1 + wk)/2; %wbar_hrg=(hrg_wk+hrg_wk1)/2;\nqk1 = (eye(4) + dt/2*Omega(wbar) + 1/48*(Omega(wk1)*Omega(wk) - Omega(wk)*Omega(wk1))*dt^2)*qk;\n%2nd order term\nqk1 = qk1+.5*(.5^2*Omega(wbar)*Omega(wbar)*dt^2)*qk;\n\n%%% still tunning\nR_i2b_k1_delay=eye(3,3);\n%%%%%%%%TEST%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\nif 1 %Preparation for compensating magnetometer delay, gps_latency ALWAYS.\n    %if norm(wbar)>pi %delay compensation only high rate when w >180 degree/second.\n    %compensating mag delay    \n    %Preparation for compensating magnetometer delay, gps_latency\n    \n    qk1_mag=(eye(4) + (gps_latency)/2*Omega(wbar))*[0 0 0 1]';        \n    R_i2b_k1_delay= quat_to_dcm(qk1_mag);\nend\n\n%normalize\nqk1_squared=sum(qk1.^2);\nif qk1_squared ~=0\n    qk1 = qk1/(sqrt(qk1_squared));\nend\n\n%prepare transition from B2I & I2B\nR_i2b_k = quat_to_dcm(qk);    R_b2i_k = R_i2b_k';\nR_i2b_k1 = quat_to_dcm(qk1);  R_b2i_k1 = R_i2b_k1';\n\n%propagate position/velocity ECI\nak_inertial = R_b2i_k*ak + a_grav; %a_inertial = R_b2i_k*ak;\nak1_inertial = R_b2i_k1*ak1 + a_grav;\n\n%%% use gps based ACC when acc bias is too big, saturated???\nif (acc_saturated && norm(ak1)>100) \n    a_bar_inertial=a_gps_eci;\nelse\n    a_bar_inertial=ak_inertial*.5+ak1_inertial*.5;\nend\n   \n%integrate average (linear) accel to get velocity\nif flag_freefall\n    vk1 = vk + a_gps_eci *dt;%vk1 = vk + ak_inertial*dt;\nelse\n    vk1 = vk + a_bar_inertial *dt;%vk1 = vk + ak_inertial*dt;\nend\nrk1 = rk + vk*dt; %rk1 = rk + vk*dt + (2*ak_inertial + ak1_inertial)/6*dt^2;\n    \n% if 0, %No sensor lag compensated, Measurement will not be modified w/ state for stability \n%     %propagate measurements 2 timesteps to account for gps_latency\n%     %v_meas = v_meas + a_gps_eci*(gps_latency); \n%     v_meas = v_meas + (ak_inertial + ak1_inertial)/2*(gps_latency);\n%     r_meas = r_meas + v_meas*(gps_latency);\n%     %r_meas = r_meas + (2*ak_inertial + ak1_inertial)/6*(gps_latency)^2;\n% end\n    \n%%%%%%%%%%% (2) propagate covariance %%%%%%%%%%%\n% Coavairance of propagation is scaled up because state has only bias but no scaler\n% TBD, estimate scale factor of gyro\n%  Q~~[gyroNoise gyroDynamic AccNoise AccDynamic highRateNoise HighRateDynamics]\n%W_dot based scaling not used\n%w_dot_threshold = estimator_parameters(1);w_dot_scale = estimator_parameters(2);\nw_threshold = estimator_parameters(3);w_scale =estimator_parameters(4);\n\n%scale_flag=single(abs(wk1_dot)>w_dot_threshold & abs(wk1)>w_threshold); \nscale_flag=single( abs(wk1)>w_threshold); \ndiag_scale_flag=diag(scale_flag);\n\nscaler = eye(3)+ diag_scale_flag* diag(abs(wk1)*w_scale/10)^2;     \n%%%%%TEST%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\nQ(16:18,16:18)=Q(16:18,16:18)*scaler;     %HRG bias dynamics covriance\n\nif ~hrg_only     \n     Q(4:6,4:6)=Q(4:6,4:6)*scaler;     \n     dscaler=diag(double(scaler)); %to monitor the scale\n     \n     %scaler = eye(3)+diag_scale_flag *diag(abs(wk1)*w_scale/10 )^2;\n     Q(1:3,1:3)=Q(1:3,1:3)*scaler;          \nelse\n    %%%%%%%%%%%%%%%%%%%%%%%%%%%TEST%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n    Q(4:6,4:6)=Q(4:6,4:6)*scaler;         \n    Q(13:15,13:15)=Q(13:15,13:15)*scaler;     %HRG bias dynamics covriance\n    \nend\n\n%%%%%%%\n%ACC bias dynamics Cov scaled by the velocity in body \n%Inertial Sensor Arrays  A Literature Review, John-Olof Nilsson and Isaac Skog\n%if 0, %0 for SL-11 FIX   %%%%%%%%%DEBUG for 1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! change into 0\n%    v_b_k1=R_i2b_k1*vk1;\n%    scaler = eye(3)+ diag_scale_flag *diag(abs(wk1)*w_scale/10 )^2; %for centripetal from acc location offset\n%    scaler = scaler + diag(single(abs(v_b_k1)>100)) *diag(abs(v_b_k1)/100 )^2; %for gps velocity delay\n%    Q(10:12,10:12)=Q(10:12,10:12)*scaler ;\n%else    \n    acc_location_error=0.05; %meter\n    scaler_acc_bias = eye(3)+ diag(cross(wk1, cross(wk1,[1 1 1]'*acc_location_error)))^2; %for centrifugal from acc location offset\n    scaler_acc_bias = scaler_acc_bias + diag(cross(wk1_dot,[1 1 1]'*acc_location_error))^2;       %for Euler Force from acc offset\n    \n    v_b_k1=R_i2b_k1*vk1;\n    %%%TEST!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    %scaler_acc_bias = scaler_acc_bias + diag(single(abs(v_b_k1)>100)) *diag(abs(v_b_k1)/100 )^2; %for gps velocity delay\n    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n    Q(10:12,10:12)=Q(10:12,10:12)*scaler_acc_bias ;\n%end\n\n%Acc Bias Noise covariance\n%small cov makes the filter believe acc more and less GPS velocity.\n%ACC meas error Cov VS spin Rate-might not related. but this seems to be\n%the most reasonable way to scale uncertainty of ACC \n%for ACC varies from ~0.1g up to mor ethan 10 g+\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TEST!!!\nQ(7:9,7:9)=    Q(7:9,7:9)*scaler_acc_bias;\n%Q(7:9,7:9)=    Q(7:9,7:9)*scaler_acc_bias*100 ; \n\n%scaler = eye(3)+ diag(single(abs(wk1)>0.1)) *diag(abs(wk1)/0.1 )^2;\n%Q(7:9,7:9)=    Q(7:9,7:9)*scaler ;\n\n%%%test ##\nif flag_freefall %ACC is not used during freefall\n    Q(7:9,7:9)=Q(7:9,7:9)*eye(3,3)*1000000;\n    Q(10:12,10:12)=Q(10:12,10:12)*eye(3,3)*1000000;\nend\n%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n\n\n%build STM, F x State, State = [ quaternion3 pos3 vel3 gyroi_bias3 acc_bias3 hrg_bias3]\nF = zeros(18);\nF(1:3,1:3) = -skew(wk);\nif hrg_only   \n    F(1:3,16:18) = -eye(3); %by hrg bias              \nelse\n    F(1:3,10:12) = -eye(3); %by gyro bias\n    %F(1:3,16:18) = -eye(3); %by hrg bias, .When gyro is used hrg isn't.\nend\n\nF(4:6,7:9) = eye(3);\nF(7:9,1:3) = - R_b2i_k*skew(a_bar);    \nF(7:9,4:6) = F_2body(mu,rk); %gravity sensitivity %use J2?\nF(7:9,13:15) = -R_b2i_k;     %Velocity from accelerometer bias \n\n%%%%%%%%%%debugging These for ECEF<-> BODY\n%F(7:9, 7:9)=-2*skew(wk);\n%F(7:9, 4:6)= -(skew(wk)*skew(wk));\n%%%\n\n\n%noise covariance matrix %G x Q, Q =[gyroNoise gyroDynamic AccNoise AccDynamic highRateNoise HighRateDynamics]\nG = zeros(18,18);\nif hrg_only\n    G(1,13)=-1.0;G(2,14)=-1.0;G(3,15)=-1.0; %hrg noise                  G(1:3,13:15) = -eye(3);  \nelse    \n    G(1,1)=-1.0;G(2,2)=-1.0;G(3,3)=-1.0; %gyro noise G(1:3,1:3) = -eye(3);    \nend\nG(7:9,7:9) = -R_b2i_k;\nG(10,4) =1.0;G(11, 5) =1.0;G(12,6) =1.0; %G(10:12,4:6) = eye(3);   %Gyro bias rate noise\nG(13,10)=1.0;G(14,11) =1.0;G(15,12)=1.0; %G(13:15,10:12) = eye(3); %Accel bias\nG(16,16)=1.0;G(17,17) =1.0;G(18,18)=1.0;%G(16:18, 16:18) = eye(3); %HRG bias rate noise \n\n%Matt's attmept to speed things up\nPhi = eye(18) + F*dt + 0.5*F^2*dt^2;\nQd = G*Q*G'*dt;\n\n%compute Phi and Qd in block form a la Crassidis paper\n% A = [-F G*Q*G'; zeros(18) F'];\n% B = eye(36) + A*dt + 0.5*A^2*dt^2;\n% Phi = B(19:36,19:36)';\n% Qd = Phi*B(1:18,19:36);\n\n%propagate covariance\nPk1 = Phi*Pk*Phi' + Qd;\n\n%%\n%%%%%%%%%%% (3) compute Kalman gain %%%%%%%%%%%\n%residual = meas - ref\n%%%\n\nH=zeros(0,18);R=zeros(0,0);r=zeros(0,1);\nif valid_Mag_meas\n    H_mag = skew(R_i2b_k1*Bi); %2*skew(R_i2b*Bi)?\n    r_mag = R_i2b_k1_delay*B_meas - R_i2b_k1*Bi;\n    H = [H_mag zeros(3) zeros(3) zeros(3) zeros(3) zeros(3)];\n    if norm(a_bar_inertial)<1\n        R_mag=R_mag/500;\n    end\n    R=  blkdiag(R_mag); \n    \n    r=[r_mag];\nend\nif valid_GPS_meas        \n    H=[H;zeros(3) eye(3) zeros(3) zeros(3) zeros(3) zeros(3);...\n        zeros(3) zeros(3) eye(3) zeros(3) zeros(3) zeros(3)];\n    position_uncertainty_scaler= eye(3)+ diag( (abs(v_meas)/400).^2);    \n    R = blkdiag(R, R_gps_pos* position_uncertainty_scaler ,R_gps_vel);\n    r_gps_pos = r_meas - rk1;\n    r_gps_vel = v_meas - vk1; \n    r=[r;r_gps_pos;r_gps_vel]; \nend\n\nif  ~hrg_only  %Additional eq for hrg bias est\n    r_hrg=  (hrg_w_meas_k1+hrg_w_meas_k)/2-(wbar) ;\n    H= [H;...          \n         zeros(3,15) eye(3)];    \n    R= blkdiag(R, 0.01^2*eye(3)); %1^2 gyro + hrg (=3^2 gyro) 0.05^2*eye(3)\n    r= [r; r_hrg];\nend\n\n%high velocity where body axis is assumed to be aligned with GPS velocity\n% if  norm(v_meas)>20   %attitude is already GOOD during this high velocity period\n%     H_gps_vel= - 0.5*(R_b2i_k1*skew([-norm(vk1) 0 0]') + R_b2i_k*skew([-norm(vk) 0 0]'));    \n%     r_gps_vel = v_meas-(R_b2i_k1*[-norm(vk1) 0 0]' +R_b2i_k*[-norm(vk) 0 0]')/2;\n%     H= [H;...          \n%         H_gps_vel zeros(3,15)];\n%     R= blkdiag(R, 10^2*eye(3)); %\n%     r= [r; r_gps_vel];\n% end\n\n\n%Pk matrix integrity check and bandading instead of crach on real time, \n% Not used for heavy calculation of eig\n% if sum(eig(Pk1)<0)>0\n%     err=1; %Will publish this out later\n%     Pk1=Pk1/2+Pk1'/2;    \n%     Pk1=Pk1+eye(18)*eps;\n% end\n\n%%\n%%%%%%%%%%% (4) update state %%%%%%%%%%%\n    \nif valid_Mag_meas || valid_GPS_meas\n    S = H*Pk1*H' + R;\n    K = Pk1*H'/S;   %Kalman gain\n    \n\n    delta_x = K*r;\n    \n    %update quaternion    \n    delq=.5 * delta_x(1:3,1);\n    delQ=1/sqrt(1+sum(delq.^2))*[delq; 1]';    \n    qk1=QuatProd(delQ)*qk1;   \n    \n    %update bias\n    gyro_bias_k1 = xk(10:12) + delta_x(10:12,1);\n    if valid_GPS_meas \n        accel_bias_k1 = xk(13:15) + delta_x(13:15,1);    \n        %update position and velocity\n        rk1 = rk1 + delta_x(4:6,1);\n        vk1 = vk1 + delta_x(7:9,1);  \n        status = bitor(status, bin2dec('00000010'));\n    else \n        accel_bias_k1 = xk(13:15);\n    end\n    \n    if acc_saturated\n        accel_bias_k1(1) = xk(13); %For only body x-axis\n    end\n    \n    hrg_bias_k1=xk(16:18)+ delta_x(16:18,1);    \n    xk1 = [zeros(3,1);rk1;vk1;gyro_bias_k1;accel_bias_k1;hrg_bias_k1];\n    \n    if hrg_only\n       xk1(10)=  xk(10); %bias scaled rapidely during high rotation\n       xk1(11:12)=xk1(17:18);       \n    else \n       xk1(17:18)=xk1(11:12);\n    end\n\n \n %%\n %%%%%%%%%%% (5) update covariance %%%%%%%%%%%  \n    Pk1 =(eye(18)-K*H)*Pk1*(eye(18)-K*H)'+K*R*K';\n    \n    if valid_Mag_meas, status = bitor(status, bin2dec('00000100'));end        \nelse\n    xk1 = [zeros(3,1);rk1;vk1;xk(10:18)];\nend\n\nconverging_transition =sum(diag(Pk1(4:9,4:9)));\nconverging_attitude =sum(diag(Pk1(1:3,1:3)));\nconverging_bias =sum(diag(Pk1(10:16,10:16)));\nif converging_transition < 10 %Biggest part of covariance is of the position.    \n    status = bitor(status, bin2dec('00001000'));\nend\nif converging_attitude < 20^(-3), %Biggest part of covariance is of the position.    \n    status = bitor(status, bin2dec('00010000'));\nend\nif converging_bias < 0.6,\n    status = bitor(status, bin2dec('00100000'));\nend\nif (sum(diag(Pk1))>1e7),  %Diverging, reset operation will require.\n    status = bitor(status, bin2dec('01000000'));\nend\n\n\nend\n%State = [ quaternion3 pos3 vel3 gyroi_bias3 acc_bias3 hrg_bias3]\n% x_dot=fx +GQ\n% f=[F11 0   0   F14 0 0;     G=[G11       0  0     0 G14 0 ] G11(gyro) or G14(hrg)=I\n%    0   0   I   0   0 0;       [0         0 0      0 0   0\n%    F31 F32 F33 0 F35 0;       [ 0        0 -R_b2i 0 0   0\n%    0   0   0   0  0  0;       [0         I  0     0 0   0\n%    0   0   0  0   0  0];      [0         0  0     0 I   0]\n% Q =[gyroNoise gyroDynamic AccNoise AccDynamic highRateNoise HighRateDynamics]\n\nfunction z=QuatProd(q)\nz=[q(4)*eye(3)-skew(q(1:3)) q(1:3)';...\n    -q(1:3)                  q(4)];\nend\nfunction Om = Omega(w)\nOm = [0,w(3),-w(2),w(1);-w(3),0,w(1),w(2);w(2),-w(1),0,w(3);-w(1),-w(2),-w(3),0];\nend\n\nfunction xhat = skew(x)\n% Computes the hat map, mapping a 3-vector into a 3X3 skew-symmetric matrix\nxhat = [  0   -x(3)  x(2)\n         x(3)   0   -x(1)\n        -x(2)  x(1)  0];\nend\n\nfunction z = Xi(q)\nz = [q(4)*eye(3) + skew(q(1:3));-q(1:3)'];\nend\n\nfunction F = F_2body(mu,r)\nr_mag = norm(r);\nrx = r(1);\nry = r(2);\nrz = r(3);\n\nr3 = r_mag*r_mag*r_mag;\nr5 = r_mag*r_mag*r_mag*r_mag*r_mag;\n\nF11 = -mu/r3 + 3*mu*rx^2/r5;\nF12 = 3*mu*rx*ry/r5;\nF13 = 3*mu*rx*rz/r5;\nF22 = -mu/r3 + 3*mu*ry^2/r5;\nF23 = 3*mu*ry*rz/r5;\nF33 = -mu/r3 + 3*mu*rz^2/r5;\n\nF = [F11 F12 F13; F12 F22 F23; F13 F23 F33];\nend\n\nfunction dcm = quat_to_dcm(q)\nq1 = q(1);\nq2 = q(2);\nq3 = q(3);\nq4 = q(4);\n\ndcm = zeros(3,3);\n\ndcm(1,1) = q1^2 - q2^2 - q3^2 + q4^2;\ndcm(2,1) = 2 * ( q1*q2 - q3*q4 ) ;\ndcm(3,1) = 2 * ( q1*q3 + q2*q4 ) ;\ndcm(1,2) = 2 * ( q1*q2 + q3*q4 ) ;\ndcm(2,2) = -q1^2 + q2^2 - q3^2 + q4^2;\ndcm(3,2) = 2 * ( q2*q3 - q1*q4 ) ;\ndcm(1,3) = 2 * ( q1*q3 - q2*q4 ) ;\ndcm(2,3) = 2 * ( q2*q3 + q1*q4 );\ndcm(3,3) = -q1^2 - q2^2 + q3^2 + q4^2;\nend\n\nfunction scaler = getScale(wk1, wk1_dot, diag_scale_flag,w_scale,w_dot_scale)\n%w_dot_scale = estimator_parameters(2);\n%w_scale =estimator_parameters(4);\n\nscaler = eye(3)+ diag_scale_flag* diag(abs(wk1)*w_scale +...\n    abs(wk1_dot*w_dot_scale))^2;\nscaler_limit= 5*10^6;\nscaler=(scaler>scaler_limit)*scaler_limit +diag(diag((scaler <=scaler_limit)));\nend\n%%%\n% function a_grav = getGrav(r_meas,valid_GPS_meas,rk,mu)\n% a_grav =zeros(3,1);\n% if valid_GPS_meas, \n%     rk_norm =norm(r_meas);    \n% else\n%     rk_norm =norm(rk);    \n% end\n% if rk_norm>=0,\n%     a_grav     =-mu*r_meas/(rk_norm^3);\n% end\n% end","Inputs":[{"Id":1670,"Name":"xk","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":1,"Scope":"Input","ArraySize":"18","CompiledSize":"18"},{"Id":1671,"Name":"qk","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":2,"Scope":"Input","ArraySize":"4","CompiledSize":"4"},{"Id":1674,"Name":"Pk","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":3,"Scope":"Input","ArraySize":"-1","CompiledSize":"[18, 18]"},{"Id":1675,"Name":"w_meas_k","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":4,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1676,"Name":"w_meas_k1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":5,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1677,"Name":"wk1_dot","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":6,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1678,"Name":"a_meas_k","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":7,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1679,"Name":"a_meas_k1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":8,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1680,"Name":"acc_saturated","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":9,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1681,"Name":"r_meas","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":10,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1682,"Name":"v_meas","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":11,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1683,"Name":"B_meas","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":12,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1684,"Name":"GPS_upd","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":13,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1685,"Name":"gps_latency","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":14,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1686,"Name":"GPS_time_sec_k1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":15,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1687,"Name":"GPS_time_sec_k","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":16,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1688,"Name":"hrg_w_meas_k","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":17,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1689,"Name":"hrg_w_meas_k1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":18,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1690,"Name":"hrg_w_dot","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":19,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1691,"Name":"hrg_only","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":20,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1692,"Name":"a_gps_eci","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":21,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1693,"Name":"Bi","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":22,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1694,"Name":"init_sw","Datatype":"Inherit: Same as Simulink","CompiledType":"boolean","Port":23,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1695,"Name":"estimator_parameters","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":24,"Scope":"Input","ArraySize":"-1","CompiledSize":"4"},{"Id":1696,"Name":"a_grav","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":25,"Scope":"Input","ArraySize":"-1","CompiledSize":"3"},{"Id":1697,"Name":"dt","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":26,"Scope":"Input","ArraySize":"-1","CompiledSize":"1"},{"Id":1698,"Name":"R_gps_pos","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":27,"Scope":"Input","ArraySize":"-1","CompiledSize":"[3, 3]"},{"Id":1699,"Name":"R_gps_vel","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":28,"Scope":"Input","ArraySize":"-1","CompiledSize":"[3, 3]"},{"Id":1700,"Name":"R_mag","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":29,"Scope":"Input","ArraySize":"-1","CompiledSize":"[3, 3]"},{"Id":1701,"Name":"q_vec","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":30,"Scope":"Input","ArraySize":"-1","CompiledSize":"18"}],"Outputs":[{"Id":1672,"Name":"xk1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":1,"Scope":"Output","ArraySize":"18","CompiledSize":"18"},{"Id":1673,"Name":"qk1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":2,"Scope":"Output","ArraySize":"4","CompiledSize":"4"},{"Id":1702,"Name":"Pk1","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":3,"Scope":"Output","ArraySize":"-1","CompiledSize":"[18, 18]"},{"Id":1703,"Name":"status","Datatype":"Inherit: Same as Simulink","CompiledType":"double","Port":4,"Scope":"Output","ArraySize":"-1","CompiledSize":"1"}]},"xk1":{"AttributesFormatString":"","BlockType":"Outport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":0,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":["double"],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[1,18],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":18,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":291.2860107421875,"InitialOutput":"[]","LineHandles":{"Inport":295.273193359375,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"xk1","Origin_path":"ava1_PP/xk1","OutMax":"[]","OutMin":"[]","OutputWhenDisabled":"held","Path":"ava1_PP/xk1","Port":"1","PortConnectivity":{"Type":"1","Position":[885,605],"SrcBlock":217.25830078125,"SrcPort":0,"DstBlock":[],"DstPort":[]},"Ports":[1,0,0,0,0,0,0,0,0],"Position":[890,598,920,612],"UseBusObject":"off"},"qk1":{"AttributesFormatString":"","BlockType":"Outport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":0,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":["double"],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[1,4],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":4,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":292.269775390625,"InitialOutput":"[]","LineHandles":{"Inport":296.2730712890625,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"qk1","Origin_path":"ava1_PP/qk1","OutMax":"[]","OutMin":"[]","OutputWhenDisabled":"held","Path":"ava1_PP/qk1","Port":"2","PortConnectivity":{"Type":"1","Position":[885,880],"SrcBlock":217.25830078125,"SrcPort":1,"DstBlock":[],"DstPort":[]},"Ports":[1,0,0,0,0,0,0,0,0],"Position":[890,873,920,887],"UseBusObject":"off"},"Out3":{"AttributesFormatString":"","BlockType":"Outport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":0,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":["double"],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[2,18,18],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":324,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":293.2723388671875,"InitialOutput":"[]","LineHandles":{"Inport":297.2769775390625,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"Out3","Origin_path":"ava1_PP/Out3","OutMax":"[]","OutMin":"[]","OutputWhenDisabled":"held","Path":"ava1_PP/Out3","Port":"3","PortConnectivity":{"Type":"1","Position":[885,1155],"SrcBlock":217.25830078125,"SrcPort":2,"DstBlock":[],"DstPort":[]},"Ports":[1,0,0,0,0,0,0,0,0],"Position":[890,1148,920,1162],"UseBusObject":"off"},"Out4":{"AttributesFormatString":"","BlockType":"Outport","BusObject":"BusObject","CompiledPortComplexSignals":{"Inport":0,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDataTypes":{"Inport":["double"],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortDimensions":{"Inport":[1,1],"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledPortWidths":{"Inport":1,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"CompiledSampleTime":[0.1,0],"Handle":294.281005859375,"InitialOutput":"[]","LineHandles":{"Inport":298.278076171875,"Outport":[],"Enable":[],"Trigger":[],"State":[],"LConn":[],"RConn":[],"Ifaction":[],"Reset":[]},"Name":"Out4","Origin_path":"ava1_PP/Out4","OutMax":"[]","OutMin":"[]","OutputWhenDisabled":"held","Path":"ava1_PP/Out4","Port":"4","PortConnectivity":{"Type":"1","Position":[885,1430],"SrcBlock":217.25830078125,"SrcPort":3,"DstBlock":[],"DstPort":[]},"Ports":[1,0,0,0,0,0,0,0,0],"Position":[890,1423,920,1437],"UseBusObject":"off"}},"Name":"ava1_PP","Origin_path":"ava1_PP","Path":"ava1_PP","CompiledSampleTime":[0.1,0],"AllCompiledSampleTimes":[[0.1,0]],"Handle":9.8460693359375,"BlockType":"block_diagram"}}
